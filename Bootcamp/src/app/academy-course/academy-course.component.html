<app-academypanel></app-academypanel>
<div class="container">
  <div style="position:fixed; top:40px;right:20px;z-index:999;"> <flash-messages></flash-messages> </div>
  <form (submit) = "addCource()" *ngIf="!toggleForm" >
    <h2 class="page-header" style="text-align:center;" id="f3">Course</h2>
    <br/>
 <div class="row">
        <div class="col-sm-4">
          <label style=" color: #696e7c!important;font-size: 14px!important;font-family: proxima-nova,Proxima Nova,Helvetica Neue,Helvetica,Open Sans,Arial,sans-serif!important;">ProgramType</label>
          <select [(ngModel)]="ProgramType" name="ProgramType" class="pt">
            <option value="">--Select ProgramType--</option>
            <option *ngFor="let type of ProgramTypeArray" [value]="type.id">{{type.name}}</option>
          </select>
        </div>

        <div class="col-sm-4">
          <!-- <label>Academy</label> -->
          <select [(ngModel)]="AcademyId" name="AcademyId" class="dd" hidden=true>
            <option value="">--Select Academy--</option>
            <option *ngFor="let academy of Academy" [value]="academy._id">{{academy.AcademyName}}</option>
          </select>
        </div>

        <div class="col-sm-4">
          <label class="f1">ProgramDuration</label>
          <input type="number" [(ngModel)]="ProgramDuration" name="ProgramDuration" class="pd" >
        </div>
</div>
<div class="row">

         <div class="col-sm-4">
           <label class="f1">ProgramName</label>
           <input type="text" [(ngModel)]="ProgramName" name="ProgramName" class="pn" maxlength="50">
         </div>

        <div class="col-sm-4">
         <label class="f1">ProgramDescription</label>
         <textarea name="ProgramDescription" rows="1" [(ngModel)]="ProgramDescription" class="desc" maxlength="500"></textarea>
       </div>

       <div class="col-sm-4">
         <label class="f1">ProgramSubject</label>
         <input type="text" [(ngModel)]="ProgramSubject" name="ProgramSubject" class="ps" maxlength="50">
       </div>

</div>
<div class="row">
  <div class="col-sm-4">
    <label class="f1">ProgramLocation</label>
    <select [(ngModel)]="ProgramLocationId" name="ProgramLocationId" class="dd1" (change)="getLocationName($event)">
      <option value="">--Select--</option>
      <option *ngFor="let location of ProgramLocation" style="width: 170px!important;" [value]="location._id">{{location.Loc_name}}</option>
    </select>
  </div>

       <div class="col-sm-4">
         <label class="f1">Cost</label>
         <input type="number" [(ngModel)]="Cost" name="Cost" class="cst">
       </div>

       <div class="col-sm-4">
         <label class="f1">StartDate</label>
         <input type="date" [(ngModel)]="StartDate" name="StartDate" class="st" >
       </div>


</div>
  <div class="row">
    <div class="col-sm-4">
      <label class="f1">EndDate</label>
      <input type="date" [(ngModel)]="EndDate" name="EndDate" class="st" >
    </div>

    <div class="col-sm-4">
      <label class="f1">Length</label>
      <input type="number" [(ngModel)]="Length" name="Length" class="len">
    </div>

    <div class="col-sm-4">
      <label class="f1">Classsize</label>
      <input type="number" [(ngModel)]="Classsize" name="Classsize" class="csize" maxlength="50">
    </div>

  </div>

  <div class="row">
    <div class="col-sm-4">
      <label class="f1">Career Services</label>
      <!-- <select [(ngModel)]="CareerServices" name="CareerServices" class="ser" style="margin-left: 12px;">
        <option value="">Select Career Services</option>
        <option value=true>Yes</option>
        <option value=false>No</option>
      </select> -->
      <input type="checkbox" [(ngModel)]="CareerServices" name="CareerServices" class="ser" style="margin-left: 45px;">
    </div>

    <div class="col-sm-4">
      <label class="f1">Financing</label>
      <!-- <select [(ngModel)]="Financing" name="Financing" class="ser" style="margin-left: 73px;">
        <option value="">Select Financing</option>
        <option value=true>Yes</option>
        <option value=false>No</option>
      </select> -->
      <input type="checkbox" [(ngModel)]="Financing" name="Financing" class="ser" style="margin-left: 73px;">
    </div>
    <div class="col-sm-4">
      <label class="f1">Scholarship</label>
      <!-- <select [(ngModel)]="Scholarship" name="Scholarship" class="ser" style="margin-left: 44px;">
        <option value="">Select Scholarship</option>
        <option value=true>Yes</option>
        <option value=false>No</option>
      </select> -->
      <input type="checkbox" [(ngModel)]="Scholarship" name="Scholarship" class="ser" style="margin-left: 44px;">
    </div>
  </div>

  <div class="row">
    <div class="col-sm-4">
      <label class="f1">Commitment</label>
      <input type="text" [(ngModel)]="Commitment" name="Commitment" class="cm" >
    </div>
  </div>
<br/>
<div class="text-center">
    <button type="submit" name="submit" class="btn btn-primary" style="width:70px;">Save </button>
<button type="reset" name="submit" class="btn btn-primary"  value="Clear" style="width: 70px;">Clear</button>
</div>
  </form>

  <form #editfrm="ngForm" (ngSubmit)="editCorce(editfrm)" *ngIf="toggleForm" align="center">
  <h2 class="page-header" style="text-align:center;"> Edit course</h2>
  <br/>
  <div class="row">
         <div class="col-sm-4">
           <label class="f2">ProgramType</label>
           <select [ngModel]="ProgramType" name="ProgramType" class="pt">
             <option value="">--Select--</option>
             <option *ngFor="let type of ProgramTypeArray" [value]="type.id">{{type.name}}</option>
           </select>
         </div>

         <div class="col-sm-4">
           <!-- <label>Academy</label> -->
           <select [ngModel]="AcademyId" name="AcademyId" class="dd" hidden=true>
             <option value="" class="f1">--Select--</option>
             <option *ngFor="let academy of Academy" [value]="academy._id">{{academy.AcademyName}}</option>
           </select>
         </div>

         <div class="col-sm-4">
           <label class="f2">ProgramDuration</label>
           <input type="number" [ngModel]="cource.ProgramDuration" name="ProgramDuration" class="pd" >
         </div>


 </div>
 <div class="row">
   <div class="col-sm-4">
     <label class="f2">ProgramName</label>
     <input type="text" [ngModel]="cource.ProgramName" name="ProgramName" class="pn" maxlength="50">
   </div>
        <div class="col-sm-4">
          <label class="f2">ProgramDescription</label>
          <textarea name="ProgramDescription" rows="1" [ngModel]="cource.ProgramDescription" class="desc" maxlength="500"></textarea>
        </div>

        <div class="col-sm-4">
          <label class="f2">ProgramSubject</label>
          <input type="text" [ngModel]="cource.ProgramSubject" name="ProgramSubject" class="ps" maxlength="50">
        </div>


 </div>
<div class="row">
  <div class="col-sm-4">
    <label class="f2">ProgramLocation</label>
    <select [ngModel]="ProgramLocationId" name="ProgramLocationId" class="dd1" (change)="getLocationName($event)">
      <option value="">--Select--</option>
      <option *ngFor="let location of ProgramLocation" [value]="location._id">{{location.Loc_name}}</option>
    </select>
  </div>
    <div class="col-sm-4">
      <label class="f2">Cost</label>
      <input type="number" [ngModel]="cource.Cost" name="Cost" class="cst" >
    </div>
    <div class="col-sm-4">
      <label>StartDate</label>
      <input type="date" [ngModel]="cource.StartDate" name="StartDate" class="st" >
    </div>

  </div>
  <div class="row">
    <div class="col-sm-4">
      <label class="f2">EndDate</label>
      <input type="date" [ngModel]="cource.EndDate" name="EndDate" class="st" >
    </div>
    <div class="col-sm-4">
      <label class="f2">Length</label>
      <input type="number" [ngModel]="cource.Length" name="Length" class="len">
    </div>
    <div class="col-sm-4">
      <label class="f2">Classsize</label>
      <input type="number" [ngModel]="cource.Classsize" name="Classsize" class="csize" >
    </div>

</div>
<div class="row">
  <div class="col-sm-4">
    <label class="f2">CareerServices</label>
    <!-- <select [ngModel]="cource.CareerServices" name="CareerServices" class="ser" style="margin-left: 12px;">
      <option value="">Select Career Services</option>
      <option value=true>Yes</option>
      <option value=false>No</option>
    </select> -->
    <input type="checkbox" [ngModel]="cource.CareerServices" name="CareerServices" class="ser" style="margin-left: 12px;">
  </div>
  <div class="col-sm-4">
    <label class="f2">Financing</label>
    <!-- <select [ngModel]="cource.Financing" name="Financing" class="ser" style="margin-left: 73px;">
      <option value="">Select Financing</option>
      <option value=true>Yes</option>
      <option value=false>No</option>
    </select> -->
    <input type="checkbox" [ngModel]="cource.Financing" name="Financing" class="ser" style="margin-left: 73px;">
  </div>
  <div class="col-sm-4">
    <label class="f2">Scholarship</label>
    <!-- <select [ngModel]="cource.Scholarship" name="Scholarship" class="ser" style="margin-left: 44px;">
      <option value="">Select Scholarship</option>
      <option value=true>Yes</option>
      <option value=false>No</option>
    </select> -->
    <input type="checkbox" [ngModel]="cource.Scholarship" name="Scholarship" class="ser" style="margin-left: 44px;">
  </div>
</div>
<div class="row">
  <div class="col-sm-4">
    <label class="f2">Commitment</label>
    <input type="text" [ngModel]="cource.Commitment" name="Commitment" class="cm" >
  </div>
</div>
  <br/>
    <div class="text-center">
    <button type="submit" name="submit" class="btn btn-primary" style="width:70px;" value="Edit">Save</button>
<button type="reset" name="submit" class="btn btn-primary"  value="Clear" style="width: 70px;">Clear</button>
</div>
  </form>
  <br/>
</div>

<div class="col-md-12 text-center">
  <h2 class="page-header" style="text-align:center;" id="f3"> Courses List </h2>
  <!-- start search bar   -->
  <div style="float:right;padding-bottom:5px;">
   <input type="text" [(ngModel)]="SearchText" name="search" placeholder="Serch Here"/>
    <!-- <button (click)="GoForSearch()" ><b><i class="fa fa-search"></i>Search</b></button> -->
  </div>
  <!-- end search bar   -->
<br/>
  <table class="table table-bordered">
    <thead>
      <tr style="background-color: #12ACCF!important;">
        <!-- <th>Academy</th> -->
        <th class="f2">Date Time</th>
        <th class="f2">ProgramType</th>
        <th class="f2">ProgramDuration</th>
        <th class="f2">ProgramName</th>
        <th class="f2">ProgramDescription</th>
        <th class="f2">ProgramSubject</th>
        <th class="f2">ProgramLocation</th>
        <th class="f2">Cost</th>
        <!-- <th>StartDate</th>
        <th>EndDate</th>
        <th>Length</th>
        <th>Classsize</th>
        <th>Commitment</th>
        <th>CareerServices</th>
        <th>Financing</th>
        <th>Scholarship</th> -->
        <th class="f2">Action</th>
        <th class="f2">Status</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor = "let cource of cources | filter : SearchText | paginate:{itemsPerPage:10, currentPage:p}">
        <!-- <td>{{cource.AcademyId?.AcademyName}}</td> -->
        <td> {{cource.CreatedOn}} </td>
        <td *ngIf="cource.ProgramType==1">Front End Web Application Development</td>
        <td *ngIf="cource.ProgramType==2">Full Stack Application Development</td>
        <td *ngIf="cource.ProgramType==3">User Experience Design</td>
        <td>{{ cource.ProgramDuration }}</td>
        <td>{{ cource.ProgramName }}</td>
        <td>{{ cource.ProgramDescription }}</td>
        <td>{{ cource.ProgramSubject }}</td>
        <td>{{ cource.ProgramLocationId?.Loc_name }}</td>
        <td>{{ cource.Cost }}</td>
        <!-- <td>{{ cource.StartDate }}</td>
        <td>{{ cource.EndDate }}</td>
        <td>{{ cource.Length }}</td>
        <td>{{ cource.Classsize }}</td>
        <td>{{ cource.Commitment }}</td>
        <td>{{ cource.CareerServices}}</td>
        <td>{{ cource.Financing }}</td>
        <td>{{ cource.Scholarship }}</td> -->
        <td>
          <form>
            <button type="button" name="button" (click)="deletecource(cource._id,cource.ProgramName)" value="Delete" class="btn-danger tbtn">Delete</button>
            <button type="button" name="button" class="btn btn-primary tbtn" (click)="showEditForm(cource)"> Edit </button>
            <button type="submit" name="submit" class="btn btn-primary tbtn" (click)="activateCourse(cource._id,cource.ProgramName)" *ngIf="cource.Active==false"> Activate </button>
            <button type="submit" name="submit" class="btn-danger tbtn" (click)="deactivateCourse(cource._id,cource.ProgramName)" *ngIf="cource.Active==true"> Deactivate </button>
          </form>
        </td>
        <td>
          <select [(ngModel)]="cource.StatusId" (change)="changeStatus(cource._id,cource.StatusId,cource.ProgramSubject,cource.AcademyId._id)">
            <option value="1"> Draft </option>
            <option value="2"> Publish </option>
          </select>
        </td>
      </tr>
    </tbody>
  </table>
<pagination-controls (pageChange)="p=$event"></pagination-controls>
</div>
